/**
 * @fileOverview jui_filter_rules is a jQuery plugin, useful to create dataset filter rules as JSON object and the relevant WHERE SQL.
 *               <p>License MIT
 *               <br />Copyright 2012 Christos Pontikis <a href="http://pontikis.net">http://pontikis.net</a>
 *               <br />Project page <a href="https://github.com/pontikis/jui_filter_rules">https://github.com/pontikis/jui_filter_rules</a>
 * @version 1.0.0
 * @author Christos Pontikis http://pontikis.net
 * @requires jquery, (optional but highly recommended moment.js, jquery-ui)
 */
"use strict";(function(e){var a="jui_filter_rules",h="jui_filter_rules_status",g=["text","number","date"],r=[{type:"equal",accept_values:"yes",apply_to:["text","number","date"],group:"equality"},{type:"not_equal",accept_values:"yes",apply_to:["text","number","date"],group:"equality"},{type:"in",accept_values:"yes",apply_to:["text","number","date"],group:"multiple_choice"},{type:"not_in",accept_values:"yes",apply_to:["text","number","date"],group:"multiple_choice"},{type:"less",accept_values:"yes",apply_to:["number","date"],group:"inequality"},{type:"less_or_equal",accept_values:"yes",apply_to:["number","date"],group:"inequality"},{type:"greater",accept_values:"yes",apply_to:["number","date"],group:"inequality"},{type:"greater_or_equal",accept_values:"yes",apply_to:["number","date"],group:"inequality"},{type:"begins_with",accept_values:"yes",apply_to:["text"],group:"substring"},{type:"not_begins_with",accept_values:"yes",apply_to:["text"],group:"substring"},{type:"contains",accept_values:"yes",apply_to:["text"],group:"substring"},{type:"not_contains",accept_values:"yes",apply_to:["text"],group:"substring"},{type:"ends_with",accept_values:"yes",apply_to:["text"],group:"substring"},{type:"not_ends_with",accept_values:"yes",apply_to:["text"],group:"substring"},{type:"is_empty",accept_values:"no",apply_to:["text"],group:"empty_string"},{type:"is_not_empty",accept_values:"no",apply_to:["text"],group:"empty_string"},{type:"is_null",accept_values:"no",apply_to:["text","number","date"],group:"null"},{type:"is_not_null",accept_values:"no",apply_to:["text","number","date"],group:"null"}];var u={init:function(z){var A=this;return this.each(function(){var W=A.data(a);if(typeof(W)=="undefined"){var L=A.jui_filter_rules("getDefaults");W=e.extend({},L,z)}else{W=e.extend({},W,z)}A.data(a,W);if(typeof A.data(h)==="undefined"){A.data(h,{});A.data(h)["group_id"]=0;A.data(h)["rule_id"]=0}var T=A.attr("id");d(T);A.unbind("onValidationError").bind("onValidationError",W.onValidationError);var J=W.filters,Q=n(W.filters_list_id_prefix,T)+"_",S=n(W.operators_container_id_prefix,T)+"_",K=n(W.operators_list_id_prefix,T)+"_",H,C=n(W.filter_value_container_id_prefix,T)+"_",P=n(W.group_condition_id_prefix,T)+"_",V=n(W.group_tools_id_prefix,T)+"_",N=n(W.rule_tools_id_prefix,T)+"_",E,I,Y,X,O,ac,aa,ab,R,U,G,D,M,Z,F=W.rulesListLiAppliedClass,B=W.rulesListLiErrorClass;if(A.data(h)["rule_id"]==0){if(J.length>0){A.html(o(T))}else{A.html('<div class="'+W.noFiltersFoundClass+'">'+rsc_jui_fr.no_filters_found+"</div>")}}A.addClass(W.containerClass);R='[id^="'+V+'"]';A.off("change",R).on("change",R,function(){U=V.length;G=e(this).attr("id").substr(U);M=e(this).val();switch(M){case"rule_insert_before":e(this).closest("dt").parent("dl").before(m(T));break;case"rule_insert_after":e(this).closest("dt").parent("dl").after(m(T));break;case"rule_insert_inside":e(this).closest("dt").next("dd:first").find("ul:first").prepend(m(T));break;case"group_insert_before":e(this).closest("dl").before(o(T));break;case"group_insert_after":e(this).closest("dl").after(o(T));break;case"group_insert_inside":e(this).closest("dt").next("dd:first").find("ul:first").prepend(o(T));break;case"group_delete":e(this).closest("dl").remove();break}e(this).prop("selectedIndex",0)});R='[id^="'+N+'"]';A.off("change",R).on("change",R,function(){U=N.length;G=e(this).attr("id").substr(U);Z=e(this).val();switch(Z){case"rule_insert_before":e(this).closest("li").before(m(T));break;case"rule_insert_after":e(this).closest("li").after(m(T));break;case"rule_clear":E=Q+G;Y=S+G;X=C+G;O=e("#"+E);aa=e("#"+Y);ab=e("#"+X);O.prop("selectedIndex",0);aa.html("");ab.html("");e(this).closest("li").removeClass(B);e(this).closest("li").removeClass(F);break;case"rule_delete":e(this).closest("li").remove();break;case"group_insert_before":e(this).closest("li").before(o(T));break;case"group_insert_after":e(this).closest("li").after(o(T));break}e(this).prop("selectedIndex",0)});R='[id^="'+P+'"]';A.off("change",R).on("change",R,function(){e(this).closest("dl").find("li").removeClass(F)});R='[id^="'+Q+'"]';A.off("change",R).on("change",R,function(){U=Q.length;G=e(this).attr("id").substr(U);D=e(this).prop("selectedIndex")-1;Y=S+G;I=K+G;X=C+G;aa=e("#"+Y);ab=e("#"+X);ab.show();if(D>=0){aa.html(s(T,G,e(this).val()));ac=e("#"+I);j(T,G,e(this).val(),ac.val())}else{aa.html("");ab.html("")}e(this).closest("li").removeClass(B);e(this).closest("li").removeClass(F)});R='[id^="'+K+'"]';A.off("change",R).on("change",R,function(){U=K.length;G=e(this).attr("id").substr(U);E=Q+G;I=K+G;X=C+G;O=e("#"+E);ac=e("#"+I);ab=e("#"+X);H=i(e(this).val());if(H.accept_values!=="yes"){ab.hide()}else{ab.show();if(ab.html()==""){j(T,G,O.val(),ac.val())}}e(this).closest("li").removeClass(B);e(this).closest("li").removeClass(F)})})},getDefaults:function(){return{filters:[],filter_widget_locale:"",decimal_separator:".",htmlentities:false,containerClass:"filter_rules_container",rulesGroupContainerClass:"rules_group_container",rulesGroupHeaderClass:"rules_group_header",rulesGroupBodyClass:"rules_group_body",rulesGroupConditionContainerClass:"rules_group_condition_container",rulesGroupConditionListClass:"rules_group_condition_list",rulesGroupToolsContainerClass:"rules_group_tools_container",rulesGroupToolsListClass:"rules_group_tools_list",rulesListClass:"rules_list",rulesListLiClass:"rules_list_li",rulesListLiErrorClass:"rules_list_error_li",rulesListLiAppliedClass:"rules_list_applied_li",filterContainerClass:"filter_container",filterListClass:"filter_list",operatorsListContainerClass:"operators_list_container",operatorsListClass:"operators_list",filterValueContainerClass:"filter_value_container",filterInputTextClass:"filter_input_text",filterInputNumberClass:"filter_input_number",filterInputDateClass:"filter_input_date",filterInputCheckboxClass:"filter_input_checkbox",filterInputRadioClass:"filter_input_radio",filterSelectClass:"filter_select",filterGroupListClass:"filter_group_list",filterGroupListItemHorizontalClass:"filter_group_list_item_horizontal",filterGroupListItemVerticalClass:"filter_group_list_item_vertical",ruleToolsContainerClass:"rule_tools_container",ruleToolsClass:"rule_tools_list",noFiltersFoundClass:"no_filters_found",group_dl_id_prefix:"group_",group_condition_id_prefix:"group_cond_",group_tools_id_prefix:"group_tools_",rule_li_id_prefix:"rule_",filters_list_id_prefix:"filters_list_",operators_container_id_prefix:"oper_wrap_",operators_list_id_prefix:"oper_list_",filter_value_container_id_prefix:"flt_wrap_",filter_element_id_prefix:"flt_",filter_element_name_prefix:"flt_name_",rule_tools_id_prefix:"rule_tools_",onValidationError:function(){}}},getOption:function(z){var A=this;return A.data(a)[z]},getAllOptions:function(){var z=this;return z.data(a)},setOption:function(z,C,B){var A=this;A.data(a)[z]=C;if(B){A.jui_filter_rules("init")}},refresh:function(){var z=this;z.jui_filter_rules()},destroy:function(){return e(this).each(function(){var z=e(this);z.removeData(a)})},getRules:function(R,N){var Q=this,O=Q.attr("id"),A,K,B,z,M,J,H,L,G,P,C,D=n(Q.jui_filter_rules("getOption","rule_li_id_prefix"),O)+"_",I=D.length,F,E;A=Q.find("dl").eq(R);K=A.find("dt:first").find("select:first").val();B=A.find("dd:first").find("ul:first").children().get();z=B.length;for(M=0;M<z;M++){J=B[M];H={};if(J.tagName=="LI"){if(e(J).find("select:first").prop("selectedIndex")==0){continue}F=e(J).attr("id").substr(I);H.condition={};L=e(J).find("select:first").val();P=v(l(O,L));G=e(J).find("select").eq(1).val();H.condition.filterType=P.filterType;H.condition.field=P.field;H.condition.operator=G;C=y(O,F,P,G);if(C===false){return false}else{if(C.length>0){H.condition.filterValue=C}}if(i(G).accept_values=="yes"){if(P.hasOwnProperty("filter_value_conversion_server_side")){H.filter_value_conversion_server_side=P.filter_value_conversion_server_side}}H.logical_operator=K;N.push(H)}else{if(J.tagName=="DL"){H.condition=[];H.logical_operator=K;N.push(H);E=N.length-1;R=parseInt(R)+1;Q.jui_filter_rules("getRules",R,N[E].condition);t(N)}}}return N},markRulesAsApplied:function(){var C=this,A=C.jui_filter_rules("getOption","rulesListLiErrorClass"),z=C.jui_filter_rules("getOption","rulesListLiAppliedClass"),B=C.jui_filter_rules("getRules",0,[]);if(B!==false){if(B.length>0){C.find("li").each(function(){if(e(this).find("select:first").prop("selectedIndex")>0){e(this).removeClass(A);e(this).addClass(z)}})}}},clearRules:function(){var z=this,A=z.attr("id");z.find("dl:first").html("");z.data(h)["group_id"]=0;z.data(h)["rule_id"]=0;z.jui_filter_rules("refresh")}};var d=function(E){var D=e("#"+E),F,z,C=D.jui_filter_rules("getOption","filters"),B=C.length,A=[];for(z=0;z<B;z++){A.push(C[z].filterName)}if(k(A)){F="Filternames are not unique...";D.html('<span style="color: red;">ERROR: '+F+"</span>");e.error(F)}};var n=function(A,z){return A+z};var k=function(B){var A={},z=B.length,C;for(C=0;C<z;C++){if(A[B[C]]===true){return true}A[B[C]]=true}return false};var b=function(z){if(z){return jQuery("<div />").text(z).html()}else{return""}};var f=function(z){if(z){return e("<div />").html(z).text()}else{return""}};var v=function(A){var z={},B;for(B in A){if(A.hasOwnProperty(B)){if(A[B]!==""){z[B]=A[B]}}}return z};var t=function(A){var B,C,z=A.length;for(B=0;B<z;B++){C=A[B].condition;if(e.isArray(C)){if(C.length==0){A.splice(B,1)}else{t(C)}}}};var l=function(D,E){var C=e("#"+D),z,B=C.jui_filter_rules("getOption","filters"),A=B.length,F=undefined;for(z=0;z<A;z++){if(B[z].filterName==E){F=B[z];break}}return F};var x=function(D,F){var B=e("#"+D),A=B.jui_filter_rules("getOption","filters"),z,G,I,H=r.length,E,C=[],J;z=l(D,F);G=z.filterType;I=(z.excluded_operators===undefined?[]:z.excluded_operators);for(E=0;E<H;E++){if(e.inArray(r[E].type,I)>-1){continue}if(e.inArray(G,r[E].apply_to)>-1){J={};J.operator_type=r[E].type;J.operator_label=rsc_jui_fr["operator_"+r[E].type];J.group=r[E].group;C.push(J)}}return C};var i=function(B){var A,z=r.length,C=undefined;for(A=0;A<z;A++){if(r[A].type==B){C=r[A];break}}return C};var w=function(D){var B=e("#"+D),A,E=B.jui_filter_rules("getOption","rulesGroupConditionContainerClass"),z=B.jui_filter_rules("getOption","rulesGroupConditionListClass"),C="";A=n(B.jui_filter_rules("getOption","group_condition_id_prefix"),D)+"_"+B.data(h)["group_id"];C+='<div class="'+E+'">';C+='<select id="'+A+'" class="'+z+'">';C+='<option value="AND">'+rsc_jui_fr.rules_group_AND+":</option>";C+='<option value="OR">'+rsc_jui_fr.rules_group_OR+":</option>";C+="</select>";C+="</div>";return C};var q=function(A){var z=e("#"+A),E=parseInt(z.data(h)["rule_id"]),D=z.jui_filter_rules("getOption","rulesGroupToolsContainerClass"),H=z.jui_filter_rules("getOption","rulesGroupToolsListClass"),B=n(z.jui_filter_rules("getOption","group_tools_id_prefix"),A)+"_"+E,C=(E==0?' disabled="disabled"':""),F=(e.browser.msie&&parseInt(e.browser.version)<9?"":" tools_list_shrink"),G="";G+='<div class="'+D+'">';G+='<select id="'+B+'" class="'+H+F+'">';G+='<option value="please_select">'+rsc_jui_fr.tools_please_select+"</option>";G+='<optgroup label="'+rsc_jui_fr.rule+'">';G+='<option value="rule_insert_before"'+C+">"+rsc_jui_fr.rule_insert_before+"</option>";G+='<option value="rule_insert_after"'+C+">"+rsc_jui_fr.rule_insert_after+"</option>";G+='<option value="rule_insert_inside">'+rsc_jui_fr.rule_insert_inside+"</option>";G+="</optgroup>";G+='<optgroup label="'+rsc_jui_fr.group+'">';G+='<option value="group_insert_before"'+C+">"+rsc_jui_fr.group_insert_before+"</option>";G+='<option value="group_insert_after"'+C+">"+rsc_jui_fr.group_insert_after+"</option>";G+='<option value="group_insert_inside">'+rsc_jui_fr.group_insert_inside+"</option>";G+='<option value="group_delete"'+C+">"+rsc_jui_fr.group_delete+"</option>";G+="</optgroup>";G+="</select>";G+="</div>";return G};var p=function(D){var C=e("#"+D),H=parseInt(C.data(h)["rule_id"]),B=C.jui_filter_rules("getOption","filters"),I=B.length,G=C.jui_filter_rules("getOption","filterContainerClass"),A=C.jui_filter_rules("getOption","filterListClass"),z=n(C.jui_filter_rules("getOption","filters_list_id_prefix"),D)+"_"+H,E,F="";F+='<div class="'+G+'">';F+='<select id="'+z+'" class="'+A+'">';F+='<option value="no_filter">'+rsc_jui_fr.filter_please_select+"</option>";for(E=0;E<I;E++){F+='<option value="'+B[E].filterName+'">'+B[E].filterLabel+"</option>"}F+="</select>";F+="</div>";return F};var s=function(D,J,G){var A=e("#"+D),M=n(A.jui_filter_rules("getOption","operators_container_id_prefix"),D)+"_"+J,H=e("#"+M),C=A.jui_filter_rules("getOption","operatorsListClass"),E=n(A.jui_filter_rules("getOption","operators_list_id_prefix"),D)+"_",L=E+J,B,F,I,K="",z="";B=x(D,G);I=B.length;K+='<select id="'+L+'" class="'+C+'">';for(F=0;F<I;F++){if(B[F].group!==z){K+='<optgroup label="&raquo;">';z=B[F].group}K+='<option value="'+B[F].operator_type+'">'+B[F].operator_label+"</option>";if(F<I-1&&B[parseInt(F)+1].group!==z){K+="</optgroup>"}}K+="</select>";H.html(K)};var j=function(S,J,ac,Q){var ak=e("#"+S),al=i(Q),C=n(ak.jui_filter_rules("getOption","filter_value_container_id_prefix"),S)+"_"+J,ae=e("#"+C),P=ak.jui_filter_rules("getOption","filters"),Y=v(l(S,ac)),T=Y.filterType,A=Y.filter_interface,G=A.length,an,D,E,M,K="",N,Z,B=["id","name"],R="",am,af,V,ai,W="",z="no",aj,I=ak.jui_filter_rules("getOption","filterGroupListClass"),ah=ak.jui_filter_rules("getOption","filterGroupListItemHorizontalClass"),ad=ak.jui_filter_rules("getOption","filterGroupListItemVerticalClass"),ao=ak.jui_filter_rules("getOption","filter_widget_locale"),H="";if(al.accept_values!=="yes"){ae.html("");return true}if(Y.hasOwnProperty("lookup_values_ajax_url")){W=Y.lookup_values_ajax_url;e.ajax({url:W,success:(function(aq){am=e.parseJSON(aq);ae.html(U());L()})})}else{if(Y.hasOwnProperty("lookup_values")){am=Y.lookup_values}ae.html(U());L()}function U(){for(an=0;an<G;an++){D=A[an].filter_element;N=v(A[an].filter_element_attributes);if(D=="input"){K=N.type}O();if(K=="checkbox"||K=="radio"){ap();af=am.length;H+='<ul class="'+I+'">';for(V=0;V<af;V++){H+='<li class="'+aj+'">';H+="<"+D;ab(V);H+=' id="'+E+'"';if(K=="radio"){ag();H+=' name="'+M+'"'}X();H+=' value="'+am[V]["lk_value"]+'"';ai=(am[V]["lk_selected"]=="yes"?' checked="checked"':"");H+=ai;H+=">";H+='<label for="'+E+'">'+am[V]["lk_option"]+"</label>";H+="</li>"}H+="</ul>"}else{H+="<"+D;ab(an);H+=' id="'+E+'"';X();H+=">";if(D=="select"){F()}if(D=="div"){H+="</div>"}}}return H}function ab(aq){E=n(ak.jui_filter_rules("getOption","filter_element_id_prefix"),S)+"_"+J+"_"+aq}function ag(){M=n(ak.jui_filter_rules("getOption","filter_element_name_prefix"),S)+"_"+J}function O(){if(D=="input"){if(K=="text"){B=["id","name"]}else{if(K=="radio"){B=["id","name","value","checked"]}else{if(K=="checkbox"){B=["id","name","value","checked"]}}}}else{if(D=="select"){B=["id","name","value"]}}}function aa(){var aq="";R="";if(D=="input"){if(K=="text"){if(T=="text"){aq="filterInputTextClass"}else{if(T=="number"){aq="filterInputNumberClass"}else{if(T=="date"){aq="filterInputDateClass"}}}}else{if(K=="radio"){aq="filterInputRadioClass"}else{if(K=="checkbox"){aq="filterInputCheckboxClass"}}}}else{if(D=="select"){aq="filterSelectClass"}}if(aq!==""){R=ak.jui_filter_rules("getOption",aq)}}function X(){for(Z in N){if(N.hasOwnProperty(Z)){if(e.inArray(Z,B)>-1){continue}H+=" "+Z+'="'+N[Z]+'"'}}if(!N.hasOwnProperty("class")){aa();if(R!==""){H+=' class="'+R+'"'}}}function F(){af=am.length;for(V=0;V<af;V++){ai=(am[V]["lk_selected"]=="yes"?' selected="selected"':"");H+='<option value="'+am[V]["lk_value"]+'"'+ai+">"+am[V]["lk_option"]+"</option>"}H+="</select>"}function ap(){z="no";if(A[an].hasOwnProperty("vertical_orientation")){z=A[an].vertical_orientation}aj=(z=="yes"?ad:ah)}function L(){if(K=="checkbox"||K=="radio"){return true}for(an=0;an<G;an++){if(!A[an].hasOwnProperty("filter_widget")){continue}E=n(ak.jui_filter_rules("getOption","filter_element_id_prefix"),S)+"_"+J+"_"+an;var ar=e("#"+E);var at=A[an]["filter_widget"];var aq=A[an]["filter_widget_properties"];if(at=="datepicker"){ar.datepicker(aq,e.datepicker.regional[ao])}if(at=="datetimepicker"){ar.datetimepicker(aq,e.datepicker.regional[ao],e.timepicker.regional[ao])}if(at=="autocomplete"){ar.autocomplete(aq)}if(at=="spinner"){ar.spinner(aq)}if(at=="slider"){ar.slider(aq)}}return true}return true};var c=function(D){var B=e("#"+D),A=parseInt(B.data(h)["rule_id"]),G=B.jui_filter_rules("getOption","ruleToolsContainerClass"),F=B.jui_filter_rules("getOption","ruleToolsClass"),z=n(B.jui_filter_rules("getOption","rule_tools_id_prefix"),D)+"_"+A,E=(e.browser.msie&&parseInt(e.browser.version)<9?"":" tools_list_shrink"),C="";C+='<div class="'+G+'">';C+='<select id="'+z+'" class="'+F+E+'">';C+='<option value="please_select">'+rsc_jui_fr.tools_please_select+"</option>";C+='<optgroup label="'+rsc_jui_fr.rule+'">';C+='<option value="rule_insert_before">'+rsc_jui_fr.rule_insert_before+"</option>";C+='<option value="rule_insert_after">'+rsc_jui_fr.rule_insert_after+"</option>";C+='<option value="rule_clear">'+rsc_jui_fr.rule_clear+"</option>";C+='<option value="rule_delete">'+rsc_jui_fr.rule_delete+"</option>";C+="</optgroup>";C+='<optgroup label="'+rsc_jui_fr.group+'">';C+='<option value="group_insert_before">'+rsc_jui_fr.group_insert_before+"</option>";C+='<option value="group_insert_after">'+rsc_jui_fr.group_insert_after+"</option>";C+="</optgroup>";C+="</select>";C+="</div>";return C};var o=function(D){var A=e("#"+D),G=A.jui_filter_rules("getOption","group_dl_id_prefix"),F,I,H=A.jui_filter_rules("getOption","rulesGroupContainerClass"),B=A.jui_filter_rules("getOption","rulesGroupHeaderClass"),z=A.jui_filter_rules("getOption","rulesGroupBodyClass"),C=A.jui_filter_rules("getOption","rulesListClass"),E="";I=parseInt(A.data(h)["group_id"])+1;A.data(h)["group_id"]=I;F=n(G,D)+"_"+I;E+='<dl id="'+F+'" class="'+H+'">';E+='<dt class="'+B+'">';E+=w(D);E+=q(D);E+="</dt>";E+='<dd class="'+z+'">';E+='<ul class="'+C+'">';E+=m(D);E+="</ul>";E+="</dd>";E+="</dl>";return E};var m=function(C){var B=e("#"+C),F=B.jui_filter_rules("getOption","rulesListLiClass"),E=B.jui_filter_rules("getOption","operatorsListContainerClass"),D=B.jui_filter_rules("getOption","filterValueContainerClass"),K=n(B.jui_filter_rules("getOption","rule_li_id_prefix"),C)+"_",J=n(B.jui_filter_rules("getOption","operators_container_id_prefix"),C)+"_",H=n(B.jui_filter_rules("getOption","filter_value_container_id_prefix"),C)+"_",I,L,z,G,A="";G=parseInt(B.data(h)["rule_id"])+1;B.data(h)["rule_id"]=G;L=J+G;z=H+G;I=K+G;A+='<li id="'+I+'" class="'+F+'">';A+=p(C);A+='<div id="'+L+'" class="'+E+'">';A+="</div>";A+='<div id="'+z+'" class="'+D+'">';A+="</div>";A+=c(C);A+="</li>";return A};var y=function(ac,L,O,F){var ae=e("#"+ac),Z=O.filterType,Y=O.filter_interface,K=Y.length,ab,aa,S=ae.jui_filter_rules("getOption","filter_element_id_prefix"),W,V="",H,T,M=i(F),C=n(ae.jui_filter_rules("getOption","rule_li_id_prefix"),ac)+"_"+L,ad=e("#"+C),A=ae.jui_filter_rules("getOption","rulesListLiErrorClass"),J=ae.jui_filter_rules("getOption","decimal_separator"),X=new RegExp(J,"g"),I=ae.jui_filter_rules("getOption","htmlentities"),Q,R=[],z,P,U,D="",B=[],E,af;ad.removeClass(A);if(M.accept_values!=="yes"){return R}for(ab=0;ab<K;ab++){if(Y[ab].hasOwnProperty("returns_no_value")){if(Y[ab]["returns_no_value"]=="yes"){continue}}aa=Y[ab].filter_element;H=Y[ab].filter_element_attributes;if(aa=="input"){V=H.type;if(V=="text"){W=N(ab);Q=e("#"+W);R.push(Q.val())}if(V=="checkbox"||V=="radio"){T=e('[id^="'+n(S,ac)+"_"+L+'_"]');T.each(function(){if(e(this).is(":checked")){R.push(e(this).val())}})}}if(aa=="select"){W=N(ab);Q=e("#"+W);if(H.hasOwnProperty("multiple")){R=Q.val()}else{R.push(Q.val())}}}z=R.length;for(P=0;P<z;P++){if(e.trim(R[P]).length==0){ad.addClass(A);ae.triggerHandler("onValidationError",{err_num:1,err_description:rsc_jui_fr.error_no_value_given,elem_filter:Q});return false}}if(Z=="number"){z=R.length;for(P=0;P<z;P++){R[P]=R[P].replace(X,".");if(!e.isNumeric(R[P])){ad.addClass(A);ae.triggerHandler("onValidationError",{err_num:2,err_description:rsc_jui_fr.error_invalid_number,elem_filter:Q});return false}}}if(Z=="date"){z=R.length;if(O.hasOwnProperty("validate_dateformat")){for(P=0;P<z;P++){if(moment(R[P],O.validate_dateformat).isValid()==false){ad.addClass(A);ae.triggerHandler("onValidationError",{err_num:3,err_description:rsc_jui_fr.error_invalid_datetime,elem_filter:Q});return false}}}}if(O.hasOwnProperty("filter_value_conversion")){U=O.filter_value_conversion;D=U.function_name;E=U.args.length;for(af=0;af<E;af++){B.push(U.args[af])}z=R.length;for(P=0;P<z;P++){if(P==0){B.push(R[P])}else{E=B.length;B[E-1]=R[P]}try{R[P]=window[D].apply(null,B)}catch(G){ad.addClass(A);ae.triggerHandler("onValidationError",{err_num:0,err_description:rsc_jui_fr.error_converting_value+":\n\n"+G.message,elem_filter:Q});return false}}}if(Z!=="number"){if(I){z=R.length;for(P=0;P<z;P++){R[P]=b(R[P])}}}function N(ag){return n(S,ac)+"_"+L+"_"+ag}return R};e.fn.jui_filter_rules=function(A){if(this.size()!=1){var z="You must use this plugin ("+a+") with a unique element (at once)";this.html('<span style="color: red;">ERROR: '+z+"</span>");e.error(z)}if(u[A]){return u[A].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof A==="object"||!A){return u.init.apply(this,arguments)}else{e.error("Method "+A+" does not exist on jQuery."+a)}}}})(jQuery);
